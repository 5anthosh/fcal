!function(){var e={exports:{}};!function(t){"use strict";var n,r,i,o,s=9e15,u=1e9,a="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},f=!0,l="[DecimalError] ",d=l+"Invalid argument: ",m=l+"Precision limit exceeded",v=l+"crypto unavailable",w=Math.floor,y=Math.pow,g=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,T=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,N=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,E=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,b=1e7,A=7,P=c.length-1,x=h.length-1,k={name:"[object Decimal]"};function O(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",(n=A-r.length)&&(o+=Y(n)),o+=r;s=e[t],(n=A-(r=s+"").length)&&(o+=Y(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function M(e,t,n){if(e!==~~e||e<t||e>n)throw Error(d+e)}function S(e,t,n,r){var i,o,s,u;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=A,i=0):(i=Math.ceil((t+1)/A),t%=A),o=y(10,A-t),u=e[i]%o|0,null==r?t<3?(0==t?u=u/100|0:1==t&&(u=u/10|0),s=n<4&&99999==u||n>3&&49999==u||5e4==u||0==u):s=(n<4&&u+1==o||n>3&&u+1==o/2)&&(e[i+1]/o/100|0)==y(10,t-2)-1||(u==o/2||0==u)&&0==(e[i+1]/o/100|0):t<4?(0==t?u=u/1e3|0:1==t?u=u/100|0:2==t&&(u=u/10|0),s=(r||n<4)&&9999==u||!r&&n>3&&4999==u):s=((r||n<4)&&u+1==o||!r&&n>3&&u+1==o/2)&&(e[i+1]/o/1e3|0)==y(10,t-3)-1,s}function C(e,t,n){for(var r,i,o=[0],s=0,u=e.length;s<u;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=a.indexOf(e.charAt(s++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}k.absoluteValue=k.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),R(e)},k.ceil=function(){return R(new this.constructor(this),this.e+1,2)},k.comparedTo=k.cmp=function(e){var t,n,r,i,o=this,s=o.d,u=(e=new o.constructor(e)).d,a=o.s,c=e.s;if(!s||!u)return a&&c?a!==c?a:s===u?0:!s^a<0?1:-1:NaN;if(!s[0]||!u[0])return s[0]?a:u[0]?-c:0;if(a!==c)return a;if(o.e!==e.e)return o.e>e.e^a<0?1:-1;for(t=0,n=(r=s.length)<(i=u.length)?r:i;t<n;++t)if(s[t]!==u[t])return s[t]>u[t]^a<0?1:-1;return r===i?0:r>i^a<0?1:-1},k.cosine=k.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+A,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?r=(1/Q(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=W(e,1,t.times(r),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(r,$(r,n)),r.precision=e,r.rounding=t,R(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},k.cubeRoot=k.cbrt=function(){var e,t,n,r,i,o,s,u,a,c,h=this,p=h.constructor;if(!h.isFinite()||h.isZero())return new p(h);for(f=!1,(o=h.s*y(h.s*h,1/3))&&Math.abs(o)!=1/0?r=new p(o.toString()):(n=O(h.d),(o=((e=h.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=y(n,1/3),e=w((e+1)/3)-(e%3==(e<0?-1:2)),(r=new p(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=h.s),s=(e=p.precision)+3;;)if(c=(a=(u=r).times(u).times(u)).plus(h),r=L(c.plus(h).times(u),c.plus(a),s+2,1),O(u.d).slice(0,s)===(n=O(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(R(r,e+1,1),t=!r.times(r).times(r).eq(h));break}if(!i&&(R(u,e+1,0),u.times(u).times(u).eq(h))){r=u;break}s+=4,i=1}return f=!0,R(r,e,p.rounding,t)},k.decimalPlaces=k.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-w(this.e/A))*A,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},k.dividedBy=k.div=function(e){return L(this,new this.constructor(e))},k.dividedToIntegerBy=k.divToInt=function(e){var t=this.constructor;return R(L(this,new t(e),0,1,1),t.precision,t.rounding)},k.equals=k.eq=function(e){return 0===this.cmp(e)},k.floor=function(){return R(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(e){return this.cmp(e)>0},k.greaterThanOrEqualTo=k.gte=function(e){var t=this.cmp(e);return 1==t||0===t},k.hyperbolicCosine=k.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,u=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return u;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,(i=o.d.length)<32?t=(1/Q(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=W(s,1,o.times(t),new s(1),!0);for(var a,c=e,h=new s(8);c--;)a=o.times(o),o=u.minus(a.times(h.minus(a.times(h))));return R(o,s.precision=n,s.rounding=r,!0)},k.hyperbolicSine=k.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=W(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=W(o,2,i=i.times(1/Q(5,e)),i,!0);for(var s,u=new o(5),a=new o(16),c=new o(20);e--;)s=i.times(i),i=i.times(u.plus(s.times(a.times(s).plus(c))))}return o.precision=t,o.rounding=n,R(i,t,n,!0)},k.hyperbolicTangent=k.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,L(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},k.inverseCosine=k.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?I(n,i,o):new n(0):new n(NaN):t.isZero()?I(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=I(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},k.inverseHyperbolicCosine=k.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,f=!1,n=n.times(n).minus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},k.inverseHyperbolicSine=k.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,f=!1,n=n.times(n).plus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?R(new o(i),e,t,!0):(o.precision=n=r-i.e,i=L(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},k.inverseSine=k.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=I(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},k.inverseTangent=k.atan=function(){var e,t,n,r,i,o,s,u,a,c=this,h=c.constructor,p=h.precision,l=h.rounding;if(c.isFinite()){if(c.isZero())return new h(c);if(c.abs().eq(1)&&p+4<=x)return(s=I(h,p+4,l).times(.25)).s=c.s,s}else{if(!c.s)return new h(NaN);if(p+4<=x)return(s=I(h,p+4,l).times(.5)).s=c.s,s}for(h.precision=u=p+10,h.rounding=1,e=n=Math.min(28,u/A+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(f=!1,t=Math.ceil(u/A),r=1,a=c.times(c),s=new h(c),i=c;-1!==e;)if(i=i.times(a),o=s.minus(i.div(r+=2)),i=i.times(a),void 0!==(s=o.plus(i.div(r+=2))).d[t])for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),f=!0,R(s,h.precision=p,h.rounding=l,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&w(this.e/A)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&0===this.d[0]},k.lessThan=k.lt=function(e){return this.cmp(e)<0},k.lessThanOrEqualTo=k.lte=function(e){return this.cmp(e)<1},k.logarithm=k.log=function(e){var t,n,r,i,o,s,u,a,c=this.constructor,h=c.precision,p=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(f=!1,s=q(this,u=h+5),r=t?F(c,u+10):q(e,u),S((a=L(s,r,u,1)).d,i=h,p))do{if(s=q(this,u+=10),r=t?F(c,u+10):q(e,u),a=L(s,r,u,1),!o){+O(a.d).slice(i+1,i+15)+1==1e14&&(a=R(a,h+1,0));break}}while(S(a.d,i+=10,p));return f=!0,R(a,h,p)},k.minus=k.sub=function(e){var t,n,r,i,o,s,u,a,c,h,p,l,d=this,m=d.constructor;if(e=new m(e),!d.d||!e.d)return d.s&&e.s?d.d?e.s=-e.s:e=new m(e.d||d.s!==e.s?d:NaN):e=new m(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.plus(e);if(c=d.d,l=e.d,u=m.precision,a=m.rounding,!c[0]||!l[0]){if(l[0])e.s=-e.s;else{if(!c[0])return new m(3===a?-0:0);e=new m(d)}return f?R(e,u,a):e}if(n=w(e.e/A),h=w(d.e/A),c=c.slice(),o=h-n){for((p=o<0)?(t=c,o=-o,s=l.length):(t=l,n=h,s=c.length),o>(r=Math.max(Math.ceil(u/A),s)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((p=(r=c.length)<(s=l.length))&&(s=r),r=0;r<s;r++)if(c[r]!=l[r]){p=c[r]<l[r];break}o=0}for(p&&(t=c,c=l,l=t,e.s=-e.s),s=c.length,r=l.length-s;r>0;--r)c[s++]=0;for(r=l.length;r>o;){if(c[--r]<l[r]){for(i=r;i&&0===c[--i];)c[i]=b-1;--c[i],c[r]+=b}c[r]-=l[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=_(c,n),f?R(e,u,a):e):new m(3===a?-0:0)},k.modulo=k.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?R(new r(n),r.precision,r.rounding):(f=!1,9==r.modulo?(t=L(n,e.abs(),0,3,1)).s*=e.s:t=L(n,e,0,r.modulo,1),t=t.times(e),f=!0,n.minus(t))},k.naturalExponential=k.exp=function(){return H(this)},k.naturalLogarithm=k.ln=function(){return q(this)},k.negated=k.neg=function(){var e=new this.constructor(this);return e.s=-e.s,R(e)},k.plus=k.add=function(e){var t,n,r,i,o,s,u,a,c,h,p=this,l=p.constructor;if(e=new l(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new l(e.d||p.s===e.s?p:NaN)):e=new l(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(c=p.d,h=e.d,u=l.precision,a=l.rounding,!c[0]||!h[0])return h[0]||(e=new l(p)),f?R(e,u,a):e;if(o=w(p.e/A),r=w(e.e/A),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,s=h.length):(n=h,r=o,s=c.length),i>(s=(o=Math.ceil(u/A))>s?o+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=h.length)<0&&(i=s,n=h,h=c,c=n),t=0;i;)t=(c[--i]=c[i]+h[i]+t)/b|0,c[i]%=b;for(t&&(c.unshift(t),++r),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=_(c,r),f?R(e,u,a):e},k.precision=k.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(d+e);return n.d?(t=D(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},k.round=function(){var e=this,t=e.constructor;return R(new t(e),e.e+1,t.rounding)},k.sine=k.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+A,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return W(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=W(e,2,t=t.times(1/Q(5,n)),t);for(var i,o=new e(5),s=new e(16),u=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(u))));return t}(r,$(r,n)),r.precision=e,r.rounding=t,R(o>2?n.neg():n,e,t,!0)):new r(NaN)},k.squareRoot=k.sqrt=function(){var e,t,n,r,i,o,s=this,u=s.d,a=s.e,c=s.s,h=s.constructor;if(1!==c||!u||!u[0])return new h(!c||c<0&&(!u||u[0])?NaN:u?s:1/0);for(f=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=O(u)).length+a)%2==0&&(t+="0"),c=Math.sqrt(t),a=w((a+1)/2)-(a<0||a%2),r=new h(t=c==1/0?"1e"+a:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new h(c.toString()),n=(a=h.precision)+3;;)if(r=(o=r).plus(L(s,o,n+2,1)).times(.5),O(o.d).slice(0,n)===(t=O(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(R(r,a+1,1),e=!r.times(r).eq(s));break}if(!i&&(R(o,a+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}return f=!0,R(r,a,h.rounding,e)},k.tangent=k.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=L(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,R(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},k.times=k.mul=function(e){var t,n,r,i,o,s,u,a,c,h=this,p=h.constructor,l=h.d,d=(e=new p(e)).d;if(e.s*=h.s,!(l&&l[0]&&d&&d[0]))return new p(!e.s||l&&!l[0]&&!d||d&&!d[0]&&!l?NaN:l&&d?0*e.s:e.s/0);for(n=w(h.e/A)+w(e.e/A),(a=l.length)<(c=d.length)&&(o=l,l=d,d=o,s=a,a=c,c=s),o=[],r=s=a+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,i=a+r;i>r;)u=o[i]+d[r]*l[i-r-1]+t,o[i--]=u%b|0,t=u/b|0;o[i]=(o[i]+t)%b|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=_(o,n),f?R(e,p.precision,p.rounding):e},k.toBinary=function(e,t){return J(this,2,e,t)},k.toDecimalPlaces=k.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(M(e,0,u),void 0===t?t=r.rounding:M(t,0,8),R(n,e+n.e+1,t))},k.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=U(r,!0):(M(e,0,u),void 0===t?t=i.rounding:M(t,0,8),n=U(r=R(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?n=U(i):(M(e,0,u),void 0===t?t=o.rounding:M(t,0,8),n=U(r=R(new o(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},k.toFraction=function(e){var t,n,r,i,o,s,u,a,c,h,p,l,m=this,v=m.d,w=m.constructor;if(!v)return new w(m);if(c=n=new w(1),r=a=new w(0),s=(o=(t=new w(r)).e=D(v)-m.e-1)%A,t.d[0]=y(10,s<0?A+s:s),null==e)e=o>0?t:c;else{if(!(u=new w(e)).isInt()||u.lt(c))throw Error(d+u);e=u.gt(t)?o>0?t:c:u}for(f=!1,u=new w(O(v)),h=w.precision,w.precision=o=v.length*A*2;p=L(u,t,0,1,1),1!=(i=n.plus(p.times(r))).cmp(e);)n=r,r=i,i=c,c=a.plus(p.times(i)),a=i,i=t,t=u.minus(p.times(i)),u=i;return i=L(e.minus(n),r,0,1,1),a=a.plus(i.times(c)),n=n.plus(i.times(r)),a.s=c.s=m.s,l=L(c,r,o,1).minus(m).abs().cmp(L(a,n,o,1).minus(m).abs())<1?[c,r]:[a,n],w.precision=h,f=!0,l},k.toHexadecimal=k.toHex=function(e,t){return J(this,16,e,t)},k.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:M(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(f=!1,n=L(n,e,0,t,1).times(e),f=!0,R(n)):(e.s=n.s,n=e),n},k.toNumber=function(){return+this},k.toOctal=function(e,t){return J(this,8,e,t)},k.toPower=k.pow=function(e){var t,n,r,i,o,s,u=this,a=u.constructor,c=+(e=new a(e));if(!(u.d&&e.d&&u.d[0]&&e.d[0]))return new a(y(+u,c));if((u=new a(u)).eq(1))return u;if(r=a.precision,o=a.rounding,e.eq(1))return R(u,r,o);if((t=w(e.e/A))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=B(a,u,n,r),e.s<0?new a(1).div(i):R(i,r,o);if((s=u.s)<0){if(t<e.d.length-1)return new a(NaN);if(0==(1&e.d[t])&&(s=1),0==u.e&&1==u.d[0]&&1==u.d.length)return u.s=s,u}return(t=0!=(n=y(+u,c))&&isFinite(n)?new a(n+"").e:w(c*(Math.log("0."+O(u.d))/Math.LN10+u.e+1)))>a.maxE+1||t<a.minE-1?new a(t>0?s/0:0):(f=!1,a.rounding=u.s=1,n=Math.min(12,(t+"").length),(i=H(e.times(q(u,r+n)),r)).d&&S((i=R(i,r+5,1)).d,r,o)&&(t=r+10,+O((i=R(H(e.times(q(u,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=R(i,r+1,0))),i.s=s,f=!0,a.rounding=o,R(i,r,o))},k.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=U(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(M(e,1,u),void 0===t?t=i.rounding:M(t,0,8),n=U(r=R(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toSignificantDigits=k.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(M(e,1,u),void 0===t?t=n.rounding:M(t,0,8)),R(new n(this),e,t)},k.toString=function(){var e=this,t=e.constructor,n=U(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},k.truncated=k.trunc=function(){return R(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var e=this,t=e.constructor,n=U(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var L=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,o,s,u,a,c){var h,p,f,l,d,m,v,y,g,T,N,E,P,x,k,O,M,S,C,L,U=i.constructor,_=i.s==o.s?1:-1,F=i.d,I=o.d;if(!(F&&F[0]&&I&&I[0]))return new U(i.s&&o.s&&(F?!I||F[0]!=I[0]:I)?F&&0==F[0]||!I?0*_:_/0:NaN);for(c?(d=1,p=i.e-o.e):(c=b,d=A,p=w(i.e/d)-w(o.e/d)),C=I.length,M=F.length,T=(g=new U(_)).d=[],f=0;I[f]==(F[f]||0);f++);if(I[f]>(F[f]||0)&&p--,null==s?(x=s=U.precision,u=U.rounding):x=a?s+(i.e-o.e)+1:s,x<0)T.push(1),m=!0;else{if(x=x/d+2|0,f=0,1==C){for(l=0,I=I[0],x++;(f<M||l)&&x--;f++)k=l*c+(F[f]||0),T[f]=k/I|0,l=k%I|0;m=l||f<M}else{for((l=c/(I[0]+1)|0)>1&&(I=e(I,l,c),F=e(F,l,c),C=I.length,M=F.length),O=C,E=(N=F.slice(0,C)).length;E<C;)N[E++]=0;(L=I.slice()).unshift(0),S=I[0],I[1]>=c/2&&++S;do{l=0,(h=t(I,N,C,E))<0?(P=N[0],C!=E&&(P=P*c+(N[1]||0)),(l=P/S|0)>1?(l>=c&&(l=c-1),1==(h=t(v=e(I,l,c),N,y=v.length,E=N.length))&&(l--,n(v,C<y?L:I,y,c))):(0==l&&(h=l=1),v=I.slice()),(y=v.length)<E&&v.unshift(0),n(N,v,E,c),-1==h&&(h=t(I,N,C,E=N.length))<1&&(l++,n(N,C<E?L:I,E,c)),E=N.length):0===h&&(l++,N=[0]),T[f++]=l,h&&N[0]?N[E++]=F[O]||0:(N=[F[O]],E=1)}while((O++<M||void 0!==N[0])&&x--);m=void 0!==N[0]}T[0]||T.shift()}if(1==d)g.e=p,r=m;else{for(f=1,l=T[0];l>=10;l/=10)f++;g.e=f+p*d-1,R(g,a?s+g.e+1:s,u,m)}return g}}();function R(e,t,n,r){var i,o,s,u,a,c,h,p,l,d=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(i=1,u=p[0];u>=10;u/=10)i++;if((o=t-i)<0)o+=A,s=t,a=(h=p[l=0])/y(10,i-s-1)%10|0;else if((l=Math.ceil((o+1)/A))>=(u=p.length)){if(!r)break e;for(;u++<=l;)p.push(0);h=a=0,i=1,s=(o%=A)-A+1}else{for(h=u=p[l],i=1;u>=10;u/=10)i++;a=(s=(o%=A)-A+i)<0?0:h/y(10,i-s-1)%10|0}if(r=r||t<0||void 0!==p[l+1]||(s<0?h:h%y(10,i-s-1)),c=n<4?(a||r)&&(0==n||n==(e.s<0?3:2)):a>5||5==a&&(4==n||r||6==n&&(o>0?s>0?h/y(10,i-s):0:p[l-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,c?(t-=e.e+1,p[0]=y(10,(A-t%A)%A),e.e=-t||0):p[0]=e.e=0,e;if(0==o?(p.length=l,u=1,l--):(p.length=l+1,u=y(10,A-o),p[l]=s>0?(h/y(10,i-s)%y(10,s)|0)*u:0),c)for(;;){if(0==l){for(o=1,s=p[0];s>=10;s/=10)o++;for(s=p[0]+=u,u=1;s>=10;s/=10)u++;o!=u&&(e.e++,p[0]==b&&(p[0]=1));break}if(p[l]+=u,p[l]!=b)break;p[l--]=0,u=1}for(o=p.length;0===p[--o];)p.pop()}return f&&(e.e>d.maxE?(e.d=null,e.e=NaN):e.e<d.minE&&(e.e=0,e.d=[0])),e}function U(e,t,n){if(!e.isFinite())return K(e);var r,i=e.e,o=O(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Y(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+Y(-i-1)+o,n&&(r=n-s)>0&&(o+=Y(r))):i>=s?(o+=Y(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Y(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Y(r))),o}function _(e,t){var n=e[0];for(t*=A;n>=10;n/=10)t++;return t}function F(e,t,n){if(t>P)throw f=!0,n&&(e.precision=n),Error(m);return R(new e(c),t,1,!0)}function I(e,t,n){if(t>x)throw Error(m);return R(new e(h),t,n,!0)}function D(e){var t=e.length-1,n=t*A+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Y(e){for(var t="";e--;)t+="0";return t}function B(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/A+4);for(f=!1;;){if(n%2&&z((o=o.times(t)).d,s)&&(i=!0),0===(n=w(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}z((t=t.times(t)).d,s)}return f=!0,o}function G(e){return 1&e.d[e.d.length-1]}function V(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function H(e,t){var n,r,i,o,s,u,a,c=0,h=0,p=0,l=e.constructor,d=l.rounding,m=l.precision;if(!e.d||!e.d[0]||e.e>17)return new l(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(f=!1,a=m):a=t,u=new l(.03125);e.e>-2;)e=e.times(u),p+=5;for(a+=r=Math.log(y(2,p))/Math.LN10*2+5|0,n=o=s=new l(1),l.precision=a;;){if(o=R(o.times(e),a,1),n=n.times(++h),O((u=s.plus(L(o,n,a,1))).d).slice(0,a)===O(s.d).slice(0,a)){for(i=p;i--;)s=R(s.times(s),a,1);if(null!=t)return l.precision=m,s;if(!(c<3&&S(s.d,a-r,d,c)))return R(s,l.precision=m,d,f=!0);l.precision=a+=10,n=o=u=new l(1),h=0,c++}s=u}}function q(e,t){var n,r,i,o,s,u,a,c,h,p,l,d=1,m=e,v=m.d,w=m.constructor,y=w.rounding,g=w.precision;if(m.s<0||!v||!v[0]||!m.e&&1==v[0]&&1==v.length)return new w(v&&!v[0]?-1/0:1!=m.s?NaN:v?0:m);if(null==t?(f=!1,h=g):h=t,w.precision=h+=10,r=(n=O(v)).charAt(0),!(Math.abs(o=m.e)<15e14))return c=F(w,h+2,g).times(o+""),m=q(new w(r+"."+n.slice(1)),h-10).plus(c),w.precision=g,null==t?R(m,g,y,f=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=O((m=m.times(e)).d)).charAt(0),d++;for(o=m.e,r>1?(m=new w("0."+n),o++):m=new w(r+"."+n.slice(1)),p=m,a=s=m=L(m.minus(1),m.plus(1),h,1),l=R(m.times(m),h,1),i=3;;){if(s=R(s.times(l),h,1),O((c=a.plus(L(s,new w(i),h,1))).d).slice(0,h)===O(a.d).slice(0,h)){if(a=a.times(2),0!==o&&(a=a.plus(F(w,h+2,g).times(o+""))),a=L(a,new w(d),h,1),null!=t)return w.precision=g,a;if(!S(a.d,h-10,y,u))return R(a,w.precision=g,y,f=!0);w.precision=h+=10,c=s=m=L(p.minus(1),p.plus(1),h,1),l=R(m.times(m),h,1),i=u=1}a=c,i+=2}}function K(e){return String(e.s*e.s/0)}function Z(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%A,n<0&&(r+=A),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=A;r<i;)e.d.push(+t.slice(r,r+=A));t=t.slice(r),r=A-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),f&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function j(e,t){var r,i,o,s,u,a,c,h,p;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(T.test(t))r=16,t=t.toLowerCase();else if(g.test(t))r=2;else{if(!N.test(t))throw Error(d+t);r=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),u=(s=t.indexOf("."))>=0,i=e.constructor,u&&(s=(a=(t=t.replace(".","")).length)-s,o=B(i,new i(r),s,2*s)),s=p=(h=C(t,r,b)).length-1;0===h[s];--s)h.pop();return s<0?new i(0*e.s):(e.e=_(h,p),e.d=h,f=!1,u&&(e=L(e,o,4*a)),c&&(e=e.times(Math.abs(c)<54?y(2,c):n.pow(2,c))),f=!0,e)}function W(e,t,n,r,i){var o,s,u,a,c=e.precision,h=Math.ceil(c/A);for(f=!1,a=n.times(n),u=new e(r);;){if(s=L(u.times(a),new e(t++*t++),c,1),u=i?r.plus(s):r.minus(s),r=L(s.times(a),new e(t++*t++),c,1),void 0!==(s=u.plus(r)).d[h]){for(o=h;s.d[o]===u.d[o]&&o--;);if(-1==o)break}o=u,u=r,r=s,s=o}return f=!0,s.d.length=h+1,s}function Q(e,t){for(var n=e;--t;)n*=e;return n}function $(e,t){var n,r=t.s<0,i=I(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return o=r?4:1,t;if((n=t.divToInt(i)).isZero())o=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return o=G(n)?r?2:3:r?4:1,t;o=G(n)?r?1:4:r?3:2}return t.minus(i).abs()}function J(e,t,n,i){var o,s,c,h,p,f,l,d,m,v=e.constructor,w=void 0!==n;if(w?(M(n,1,u),void 0===i?i=v.rounding:M(i,0,8)):(n=v.precision,i=v.rounding),e.isFinite()){for(w?(o=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):o=t,(c=(l=U(e)).indexOf("."))>=0&&(l=l.replace(".",""),(m=new v(1)).e=l.length-c,m.d=C(U(m),10,o),m.e=m.d.length),s=p=(d=C(l,10,o)).length;0==d[--p];)d.pop();if(d[0]){if(c<0?s--:((e=new v(e)).d=d,e.e=s,d=(e=L(e,m,n,i,0,o)).d,s=e.e,f=r),c=d[n],h=o/2,f=f||void 0!==d[n+1],f=i<4?(void 0!==c||f)&&(0===i||i===(e.s<0?3:2)):c>h||c===h&&(4===i||f||6===i&&1&d[n-1]||i===(e.s<0?8:7)),d.length=n,f)for(;++d[--n]>o-1;)d[n]=0,n||(++s,d.unshift(1));for(p=d.length;!d[p-1];--p);for(c=0,l="";c<p;c++)l+=a.charAt(d[c]);if(w){if(p>1)if(16==t||8==t){for(c=16==t?4:3,--p;p%c;p++)l+="0";for(p=(d=C(l,o,t)).length;!d[p-1];--p);for(c=1,l="1.";c<p;c++)l+=a.charAt(d[c])}else l=l.charAt(0)+"."+l.slice(1);l=l+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)l="0"+l;l="0."+l}else if(++s>p)for(s-=p;s--;)l+="0";else s<p&&(l=l.slice(0,s)+"."+l.slice(s))}else l=w?"0p+0":"0";l=(16==t?"0x":2==t?"0b":8==t?"0o":"")+l}else l=K(e);return e.s<0?"-"+l:l}function z(e,t){if(e.length>t)return e.length=t,!0}function X(e){return new this(e).abs()}function ee(e){return new this(e).acos()}function te(e){return new this(e).acosh()}function ne(e,t){return new this(e).plus(t)}function re(e){return new this(e).asin()}function ie(e){return new this(e).asinh()}function oe(e){return new this(e).atan()}function se(e){return new this(e).atanh()}function ue(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?I(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=I(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(L(e,t,o,1)),t=I(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(L(e,t,o,1)):(n=I(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ae(e){return new this(e).cbrt()}function ce(e){return R(e=new this(e),e.e+1,2)}function he(e){if(!e||"object"!=typeof e)throw Error(l+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,u,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!(w(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(d+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(d+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[n]=!0}else this[n]=!1}return this}function pe(e){return new this(e).cos()}function fe(e){return new this(e).cosh()}function le(e,t){return new this(e).div(t)}function de(e){return new this(e).exp()}function me(e){return R(e=new this(e),e.e+1,3)}function ve(){var e,t,n=new this(0);for(f=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return f=!0,new this(1/0);n=t}return f=!0,n.sqrt()}function we(e){return e instanceof n||e&&"[object Decimal]"===e.name||!1}function ye(e){return new this(e).ln()}function ge(e,t){return new this(e).log(t)}function Te(e){return new this(e).log(2)}function Ne(e){return new this(e).log(10)}function Ee(){return V(this,arguments,"lt")}function be(){return V(this,arguments,"gt")}function Ae(e,t){return new this(e).mod(t)}function Pe(e,t){return new this(e).mul(t)}function xe(e,t){return new this(e).pow(t)}function ke(e){var t,n,r,i,o=0,s=new this(1),a=[];if(void 0===e?e=this.precision:M(e,1,u),r=Math.ceil(e/A),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(v);for(t=crypto.randomBytes(r*=4);o<r;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(r=a[--o],e%=A,r&&e&&(i=y(10,A-e),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=A)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<A&&(n-=A-r)}return s.e=n,s.d=a,s}function Oe(e){return R(e=new this(e),e.e+1,this.rounding)}function Me(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Se(e){return new this(e).sin()}function Ce(e){return new this(e).sinh()}function Le(e){return new this(e).sqrt()}function Re(e,t){return new this(e).sub(t)}function Ue(e){return new this(e).tan()}function _e(e){return new this(e).tanh()}function Fe(e){return R(e=new this(e),e.e+1,1)}(n=function e(t){var n,r,i;function o(e){var t,n,r,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,e instanceof o)return i.s=e.s,void(f?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(f?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):Z(i,e.toString())}if("string"!==r)throw Error(d+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),E.test(e)?Z(i,e):j(i,e)}if(o.prototype=k,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=he,o.clone=e,o.isDecimal=we,o.abs=X,o.acos=ee,o.acosh=te,o.add=ne,o.asin=re,o.asinh=ie,o.atan=oe,o.atanh=se,o.atan2=ue,o.cbrt=ae,o.ceil=ce,o.cos=pe,o.cosh=fe,o.div=le,o.exp=de,o.floor=me,o.hypot=ve,o.ln=ye,o.log=ge,o.log10=Ne,o.log2=Te,o.max=Ee,o.min=be,o.mod=Ae,o.mul=Pe,o.pow=xe,o.random=ke,o.round=Oe,o.sign=Me,o.sin=Se,o.sinh=Ce,o.sqrt=Le,o.sub=Re,o.tan=Ue,o.tanh=_e,o.trunc=Fe,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(p)).default=n.Decimal=n,c=new n(c),h=new n(h),"function"==typeof define&&define.amd?define(function(){return n}):e.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(k[Symbol.for("nodejs.util.inspect.custom")]=k.toString,k[Symbol.toStringTag]="Decimal"),e.exports=n):(t||(t="undefined"!=typeof self&&self&&self.self==self?self:window),i=t.Decimal,n.noConflict=function(){return t.Decimal=i,n},t.Decimal=n)}(this),e=e.exports;var t,n={},r=this&&this.__extends||(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0});var i,o,s=function(){};n.Type=s,function(e){e[e.NUMBER=0]="NUMBER",e[e.UNIT=1]="UNIT",e[e.PERCENTAGE=2]="PERCENTAGE"}(i=n.DATATYPE||(n.DATATYPE={})),function(e){e[e.PERCENTAGE=0]="PERCENTAGE",e[e.NUMBER=1]="NUMBER",e[e.UNIT=2]="UNIT"}(o=n.TYPERANK||(n.TYPERANK={})),function(t){var n=function(t){function n(n){var r=t.call(this)||this;return n instanceof e.Decimal?r.number=n:r.number=new e.Decimal(n),r.leftflag=!1,r}return r(n,t),n.prototype.print=function(){return this.number.toString()},n.prototype.Add=function(e){return this.leftflag=!0,this.TYPE>=e.TYPE?this.TYPERANK<=e.TYPERANK?e.newNumeric(this.plus(e).number):this.plus(e):e.TYPERANK>=this.TYPERANK?e.plus(this):this.newNumeric(e.plus(this).number)},n.prototype.Sub=function(e){return this.Add(e.negated())},n.prototype.times=function(e){return this.leftflag=!0,this.TYPE>=e.TYPE?this.TYPERANK<=e.TYPERANK?e.newNumeric(this.mul(e).number):this.mul(e):e.TYPERANK>=this.TYPERANK?e.mul(this):this.newNumeric(e.mul(this).number)},n.prototype.divide=function(e){return this.leftflag=!0,this.TYPE>=e.TYPE?this.TYPERANK<=e.TYPERANK?this.TYPERANK===e.TYPERANK?this.newNumeric(this.div(e).number):e.newNumeric(this.div(e).number):this.div(e):e.TYPERANK>=this.TYPERANK?e.div(this):this.newNumeric(e.div(this).number)},n.prototype.power=function(e){return this.leftflag=!0,this.TYPE>=e.TYPE?this.TYPERANK<=e.TYPERANK?this.TYPERANK===e.TYPERANK?this.newNumeric(this.pow(e).number):e.newNumeric(this.pow(e).number):this.pow(e):e.TYPERANK>=this.TYPERANK?e.pow(this):this.newNumeric(e.pow(this).number)},n.prototype.modulo=function(e){return this.leftflag=!0,this.TYPE>=e.TYPE?this.TYPERANK<=e.TYPERANK?this.TYPERANK===e.TYPERANK?this.newNumeric(this.mod(e).number):e.newNumeric(this.mod(e).number):this.mod(e):e.TYPERANK>=this.TYPERANK?e.mod(this):this.newNumeric(e.mod(this).number)},n}(t);t.Numberic=n;var s=function(t){function n(e){var n=t.call(this,e)||this;return n.TYPE=i.NUMBER,n.TYPERANK=o.NUMBER,n}return r(n,t),n.New=function(e){return new n(e)},n.prototype.isZero=function(){return this.number.isZero()},n.prototype.isNegative=function(){return this.number.isNegative()},n.prototype.isInteger=function(){return this.number.isInteger()},n.prototype.negated=function(){return n.New(this.number.negated())},n.prototype.div=function(e){return n.New(this.number.div(e.number))},n.prototype.pow=function(e){return n.New(this.number.pow(e.number))},n.prototype.mod=function(e){return n.New(this.number.modulo(e.number))},n.prototype.mul=function(e){return n.New(this.number.mul(e.number))},n.prototype.plus=function(e){return n.New(this.number.plus(e.number))},n.prototype.newNumeric=function(e){return n.New(e)},n.ZERO=n.New(new e.Decimal(0)),n}(n);t.BNumber=s;var u=function(t){function n(e){var n=t.call(this,e)||this;return n.TYPE=i.PERCENTAGE,n.TYPERANK=o.PERCENTAGE,n}return r(n,t),n.New=function(e){return new n(e)},n.prototype.isZero=function(){return this.number.isZero()},n.prototype.isNegative=function(){return this.number.isNegative()},n.prototype.isInteger=function(){return this.number.isInteger()},n.prototype.negated=function(){return n.New(this.number.negated())},n.prototype.plus=function(e){return e.TYPE===i.PERCENTAGE?n.New(this.number.plus(e.number)):n.New(e.number.plus(this.percentageValue(e.number)))},n.prototype.mul=function(e){return e.TYPE===i.PERCENTAGE?n.New(this.number.mul(e.number)):n.New(e.number.mul(this.percentageValue(e.number)))},n.prototype.div=function(e){return e.TYPE===i.PERCENTAGE?n.New(this.number.div(e.number)):e.leftflag?n.New(e.number.div(this.percentageValue(e.number))):n.New(this.percentageValue(e.number).div(e.number))},n.prototype.pow=function(e){return e.TYPE===i.PERCENTAGE?n.New(this.number.pow(e.number)):e.leftflag?n.New(e.number.pow(this.percentageValue(e.number))):n.New(this.percentageValue(e.number).pow(e.number))},n.prototype.mod=function(e){return e.TYPE===i.PERCENTAGE?n.New(this.number.mod(e.number)):e.leftflag?n.New(e.number.mod(this.percentageValue(e.number))):n.New(this.percentageValue(e.number).mod(e.number))},n.prototype.percentageValue=function(e){return e.mul(this.number.div(n.base))},n.prototype.print=function(){return"% "+this.number.toString()},n.prototype.newNumeric=function(e){return n.New(e)},n.base=new e.Decimal(100),n}(n);t.Percentage=u;var a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.unit=n,r.TYPE=i.UNIT,r.TYPERANK=o.UNIT,r}return r(t,e),t.New=function(e,n){return new t(e,n)},t.convertToUnit=function(e,n){if(e instanceof t){var r=e;if(r.unit.id===n.id)return t.New(r.convert(n.ratio),n)}return t.New(e.number,n)},t.prototype.newNumeric=function(e){return new t(e,this.unit)},t.prototype.isZero=function(){return this.number.isZero()},t.prototype.isNegative=function(){return this.number.isNegative()},t.prototype.isInteger=function(){return this.number.isInteger()},t.prototype.negated=function(){return this.newNumeric(this.number.negated())},t.prototype.plus=function(e){if(e instanceof t){var n=e;return this.unit.id===n.unit.id&&this.unit.unitType===n.unit.unitType?this.newNumeric(this.number.add(n.number)):this.unit.id!==n.unit.id?n.newNumeric(this.number.add(n.number)):n.newNumeric(this.convert(n.unit.ratio).add(n.number))}return this.newNumeric(this.number.plus(e.number))},t.prototype.mul=function(e){if(e instanceof t){var n=e;return this.unit.id===n.unit.id&&this.unit.unitType===n.unit.unitType?this.newNumeric(this.number.mul(n.number)):this.unit.id!==n.unit.id?n.newNumeric(this.number.mul(n.number)):n.newNumeric(this.convert(n.unit.ratio).mul(n.number))}return this.newNumeric(this.number.mul(e.number))},t.prototype.div=function(e){var n,r;if(this.leftflag?(n=this,r=e):(r=this,n=e),e instanceof t){var i=n,o=r;return i.unit.unitType===o.unit.unitType?i.newNumeric(i.number.div(o.number)):i.unit.id!==o.unit.id?i.newNumeric(i.number.div(r.number)):i.newNumeric(i.number.div(o.convert(i.unit.ratio)))}return this.newNumeric(n.number.div(r.number))},t.prototype.pow=function(e){var n,r;if(this.leftflag?(n=this,r=e):(r=this,n=e),e instanceof t){var i=n,o=r;return i.unit.unitType===o.unit.unitType?i.newNumeric(i.number.pow(o.number)):i.unit.id!==o.unit.id?i.newNumeric(i.number.pow(r.number)):i.newNumeric(i.number.pow(o.convert(i.unit.ratio)))}return this.newNumeric(n.number.pow(r.number))},t.prototype.mod=function(e){var n,r;if(this.leftflag?(n=this,r=e):(r=this,n=e),e instanceof t){var i=n,o=r;return i.unit.id!==o.unit.id?i.newNumeric(i.number.mod(o.number)):i.unit.unitType===o.unit.unitType?i.newNumeric(i.number.mod(o.number)):i.newNumeric(i.number.mod(o.convert(i.unit.ratio)))}return this.newNumeric(n.number.mod(r.number))},t.prototype.convert=function(e){return this.number.div(e).mul(this.unit.ratio)},t.prototype.print=function(){return this.number.toString()+" "+this.unit.unitType},t}(n);t.Units=a}(s=n.Type||(n.Type={})),n.Type=s;var u={},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r};Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function e(e,t){this.arbity=t,this.name=e}return e.prototype.call=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.function.apply(this,a([e],t));return null===i?n.Type.BNumber.New("0"):i},e}();u.FcalFunction=c;var h=function(){function e(){this.functions=Array()}return e.prototype.add=function(e){if(this.check(e.name))throw new Error(e.name+" is already registered");this.functions.push(e)},e.prototype.get=function(e){for(var t=0,n=this.functions;t<n.length;t++){var r=n[t];if(r.name===e)return[r,!0]}return[null,!1]},e.prototype.check=function(e){for(var t=0,n=this.functions;t<n.length;t++)if(n[t].name===e)return!0;return!1},e}();u.FcalFunctions=h;var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.getDefaultFunction=function(){var e=new u.FcalFunctions,t=new u.FcalFunction("abs",1);t.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.abs())},e.add(t);var n=new u.FcalFunction("sqrt",1);n.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.sqrt())},e.add(n);var r=new u.FcalFunction("cbrt",1);r.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.cbrt())},e.add(r);var i=new u.FcalFunction("log",1);i.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.log())},e.add(i);var o=new u.FcalFunction("ln",1);o.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.ln())},e.add(o);var s=new u.FcalFunction("round",1);s.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.round())},e.add(s);var a=new u.FcalFunction("floor",1);a.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.floor())},e.add(a);var c=new u.FcalFunction("ceil",1);c.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.ceil())},e.add(c);var h=new u.FcalFunction("cos",1);h.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.cosine())},e.add(h);var p=new u.FcalFunction("acos",1);p.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.inverseCosine())},e.add(p);var f=new u.FcalFunction("cosh",1);f.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.hyperbolicCosine())},e.add(f);var l=new u.FcalFunction("acosh",1);l.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.inverseHyperbolicCosine())},e.add(l);var d=new u.FcalFunction("sin",1);d.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.sine())},e.add(d);var m=new u.FcalFunction("asin",1);m.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.inverseSine())},e.add(m);var v=new u.FcalFunction("sinh",1);v.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.hyperbolicSine())},e.add(v);var w=new u.FcalFunction("asinh",1);w.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.inverseHyperbolicSine())},e.add(w);var y=new u.FcalFunction("tan",1);y.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.tangent())},e.add(y);var g=new u.FcalFunction("atan",1);g.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.inverseTangent())},e.add(g);var T=new u.FcalFunction("tanh",1);T.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.hyperbolicTangent())},e.add(T);var N=new u.FcalFunction("atanh",1);return N.function=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return r.newNumeric(r.number.inverseHyperbolicTangent())},e.add(N),e};var f={};Object.defineProperty(f,"__esModule",{value:!0});var l=function(e,t,n){this.id=e,this.ratio=t,this.unitType=n},d=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.unit=new l(e,t,n),this.phrases=r};f.TType=d,function(e){var t=function(){function e(){this.ttypes=[]}return e.prototype.Add=function(e){if(this.check.apply(this,e.phrases))throw new Error("phrase already exits");this.ttypes.push(e)},e.prototype.check=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=this.ttypes;n<r.length;n++)for(var i=0,o=r[n].phrases;i<o.length;i++)for(var s=o[i],u=0,a=e;u<a.length;u++)if(s===a[u])return!0;return!1},e.prototype.get=function(e){for(var t=0,n=this.ttypes;t<n.length;t++)for(var r=n[t],i=0,o=r.phrases;i<o.length;i++)if(e===o[i])return[r.unit,!0];return[null,!1]},e}();e.TTypes=t}(d=f.TType||(f.TType={})),f.TType=d;var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.getdefaultTTypes=function(){var t=new f.TType.TTypes;return function(t){t.Add(new f.TType("LENGTH",new e.Decimal(1),"cm","cm")),t.Add(new f.TType("LENGTH",new e.Decimal(100),"m","m")),t.Add(new f.TType("LENGTH",new e.Decimal(.1),"mm","mm")),t.Add(new f.TType("LENGTH",new e.Decimal(1e5),"km","km")),t.Add(new f.TType("LENGTH",new e.Decimal(2.54),"inch","inch")),t.Add(new f.TType("LENGTH",new e.Decimal(30.48),"foot/feet","ft")),t.Add(new f.TType("LENGTH",new e.Decimal(91.44),"yard","yd","yard")),t.Add(new f.TType("LENGTH",new e.Decimal(160934.4),"mile","mi")),t.Add(new f.TType("LENGTH",new e.Decimal(185200),"nautical mile (nmi)","nmi"))}(t),function(t){t.Add(new f.TType("SPEED",new e.Decimal(1),"km/h","kmh","kmph","khm","kph")),t.Add(new f.TType("SPEED",new e.Decimal(1.609344),"miles/h","mph")),t.Add(new f.TType("SPEED",new e.Decimal(3.6),"m/s","mps")),t.Add(new f.TType("SPEED",new e.Decimal(1.097),"ft/s","fps")),t.Add(new f.TType("SPEED",new e.Decimal(1.852),"kt","kts","knots"))}(t),function(t){t.Add(new f.TType("TIME",new e.Decimal(1),"second(s)","sec","second")),t.Add(new f.TType("TIME",new e.Decimal(60),"minute(s)","min","minute")),t.Add(new f.TType("TIME",new e.Decimal(3600),"hour(s)","hr","hour")),t.Add(new f.TType("TIME",new e.Decimal(86400),"day(s)","day","day"))}(t),t};var v={};Object.defineProperty(v,"__esModule",{value:!0});var w=function(){function e(){this.values={}}return e.prototype.get=function(e){if(this.values.hasOwnProperty(e))return this.values[e];throw new Error("Undefined variable "+e)},e.prototype.set=function(e,t){t instanceof n.Type?this.values[e]=t:this.values[e]=n.Type.BNumber.New(t)},e}();v.Environment=w;var y,g={};function T(e){return y[e]}Object.defineProperty(g,"__esModule",{value:!0}),function(e){e[e.PLUS=0]="PLUS",e[e.MINUS=1]="MINUS",e[e.TIMES=2]="TIMES",e[e.MOD=3]="MOD",e[e.SLASH=4]="SLASH",e[e.Number=5]="Number",e[e.OPEN_PARAN=6]="OPEN_PARAN",e[e.CLOSE_PARAN=7]="CLOSE_PARAN",e[e.NEWLINE=8]="NEWLINE",e[e.EOL=9]="EOL",e[e.IN=10]="IN",e[e.NAME=11]="NAME",e[e.EQUAL=12]="EQUAL",e[e.COMMA=13]="COMMA",e[e.PERCENTAGE=14]="PERCENTAGE",e[e.OF=15]="OF",e[e.UNIT=16]="UNIT",e[e.CAP=17]="CAP"}(y=g.TokenType||(g.TokenType={}));var N=function(){function e(e,t,n,r,i){this.type=e,this.lexeme=t,this.start=r,this.end=i,this.Literal=n}return e.EOLToken=function(t){return new e(y.EOL,"",null,t,t)},e.prototype.toString=function(){var e="";return null!==this.Literal&&(e=this.Literal.format()),"< "+T(this.type)+" "+this.lexeme+" "+e+" ("+this.start+", "+this.end+")>"},e}();g.Token=N;var E={};Object.defineProperty(E,"__esModule",{value:!0});var b=function(){function e(){}return e.PLUS="+",e.MINUS="-",e.TIMES="*",e.MOD="mod",e.SLASH="/",e.OPEN_PARAN="(",e.CLOSE_PARAN=")",e.CAP="^",e.PERCENTAGE="%",e.EQUAL="=",e.DOUBLE_COLON=":",e.COMMA=",",e.NEWLINE="\n",e}();E.Char=b;var A={};Object.defineProperty(A,"__esModule",{value:!0});var P=function(){function e(e,t,n){this.source=e.replace(/[ \t]+$/,""),this.start=0,this.current=0,this.tokens=[],this.phrases=t,this.ttypes=n}return e.isDigit=function(e){return e>="0"&&e<="9"},e.isAlpha=function(t){return!e.isDigit(t)&&!this.isSpace(t)&&"\0"!==t&&"\n"!==t&&!e.notAlpha.includes(t)},e.isSpace=function(e){return"\t"===e||" "===e},e.prototype.Next=function(){return this.isAtEnd()?g.Token.EOLToken(this.current):this.scan()},e.prototype.scan=function(){var t=this.space();switch(t){case E.Char.PLUS:return this.createToken(g.TokenType.PLUS);case E.Char.MINUS:return this.createToken(g.TokenType.MINUS);case E.Char.TIMES:return this.createToken(g.TokenType.TIMES);case E.Char.SLASH:return this.createToken(g.TokenType.SLASH);case E.Char.EQUAL:return this.createToken(g.TokenType.EQUAL);case E.Char.COMMA:return this.createToken(g.TokenType.COMMA);case E.Char.DOUBLE_COLON:return this.createToken(g.TokenType.EQUAL);case E.Char.OPEN_PARAN:return this.createToken(g.TokenType.OPEN_PARAN);case E.Char.CLOSE_PARAN:return this.createToken(g.TokenType.CLOSE_PARAN);case E.Char.CAP:return this.createToken(g.TokenType.CAP);case E.Char.PERCENTAGE:return this.createToken(g.TokenType.PERCENTAGE);case E.Char.NEWLINE:return this.createToken(g.TokenType.NEWLINE);default:return e.isDigit(t)?this.number():this.string()}},e.prototype.isAtEnd=function(){return this.current>=this.source.length},e.prototype.advance=function(){return this.current++,this.source.charAt(this.current-1)},e.prototype.peek=function(e){return this.current+e>=this.source.length?"\0":this.source.charAt(this.current+e)},e.prototype.string=function(){for(var t;e.isAlpha(this.peek(0))||e.isDigit(this.peek(0));)this.advance();var n,r=this.lexeme();return n=(t=this.phrases.search(r))[0],t[1]?this.createToken(n):this.ttypes.get(r)[1]?this.createTokenWithLiteral(g.TokenType.UNIT,r):this.createToken(g.TokenType.NAME)},e.prototype.number=function(){for(;e.isDigit(this.peek(0));)this.advance();if("."===this.peek(0)&&e.isDigit(this.peek(1)))for(this.advance();e.isDigit(this.peek(0));)this.advance();return this.createTokenWithLiteral(g.TokenType.Number,new n.Type.BNumber(this.lexeme()))},e.prototype.createToken=function(e){return this.createTokenWithLiteral(e,null)},e.prototype.createTokenWithLiteral=function(e,t){var n=new g.Token(e,this.lexeme(),t,this.start,this.current);return this.start=this.current,this.tokens.push(n),n},e.prototype.lexeme=function(){return this.source.substring(this.start,this.current)},e.prototype.space=function(){for(var t=this.advance();e.isSpace(t);)this.start=this.current,t=this.advance();return t},e.notAlpha=[E.Char.PLUS,E.Char.MINUS,E.Char.TIMES,E.Char.SLASH,E.Char.OPEN_PARAN,E.Char.CLOSE_PARAN,E.Char.CAP,E.Char.PERCENTAGE,E.Char.EQUAL,E.Char.COMMA,E.Char.DOUBLE_COLON],e}();A.Lexer=P;var x={};Object.defineProperty(x,"__esModule",{value:!0});var k=function(){function e(){this.depth=0}return e.createPrefix=function(e,t){return""+this.prefixchar+"-".repeat(e*this.tab)+" ("+e/this.tab+")"+t},e.prototype.visitCallExpr=function(t){return e.createPrefix(this.depth,"Function")+" \n|\n"+t.name},e.prototype.visitAssignExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.value);return this.depth-=e.tab,e.createPrefix(this.depth,"ASSIGN")+" \n|\n"+n},e.prototype.visitVariableExpr=function(t){return e.createPrefix(this.depth,"VARIABLE")+" "+t.name+"\n|\n"},e.prototype.visitUnitExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.expression);return this.depth-=e.tab,e.createPrefix(this.depth,"UNIT")+" "+t.unit.unitType+" \n|\n"+n},e.prototype.visitUnitConvertionExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.expression);return this.depth-=e.tab,e.createPrefix(this.depth,"UNIT CONVERT")+" "+t.unit.unitType+" \n|\n"+n},e.prototype.visitBinaryExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.left),r=this.evaluate(t.right);return this.depth-=e.tab,e.createPrefix(this.depth,"BINARY")+"  "+t.operator+" \n|\n"+n+r},e.prototype.visitGroupingExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.expression);return this.depth-=e.tab,e.createPrefix(this.depth,"Grouping")+" \n|\n"+n},e.prototype.visitLiteralExpr=function(t){return e.createPrefix(this.depth,"LITERAL")+" "+t.value.print()+"\n|\n"},e.prototype.visitUnaryExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.right);return this.depth-=e.tab,e.createPrefix(this.depth,"UNARY")+" "+t.operator+" \n|\n"+n},e.prototype.visitPercentageExpr=function(t){this.depth+=e.tab;var n=this.evaluate(t.expression);return this.depth-=e.tab,e.createPrefix(this.depth,"PERCENTAGE")+" \n|\n"+n},e.prototype.print=function(e){return this.evaluate(e)},e.prototype.evaluate=function(e){return e.accept(this)},e.tab=2,e.prefixchar="+",e}();x.ASTPrinter=k;var O,M={},S=this&&this.__extends||(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(M,"__esModule",{value:!0});var C=function(e){function t(t,n){var r=e.call(this)||this;return r.start=t,r.end=n,r}return S(t,e),t.prototype.toString=function(){return this.print(this)},t}(x.ASTPrinter);M.Expr=C,function(e){var t=function(e){function t(t,n,r,i,o){var s=e.call(this,i,o)||this;return s.left=t,s.operator=n,s.right=r,s}return S(t,e),t.prototype.accept=function(e){return e.visitBinaryExpr(this)},t}(e);e.Binary=t;var n=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.expression=t,i}return S(t,e),t.prototype.accept=function(e){return e.visitGroupingExpr(this)},t}(e);e.Grouping=n;var r=function(e){function t(t,n,r,i){var o=e.call(this,r,i)||this;return o.name=t,o.value=n,o}return S(t,e),t.prototype.accept=function(e){return e.visitAssignExpr(this)},t}(e);e.Assign=r;var i=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.name=t,i}return S(t,e),t.prototype.accept=function(e){return e.visitVariableExpr(this)},t}(e);e.Variable=i;var o=function(e){function t(t,n,r,i){var o=e.call(this,r,i)||this;return o.name=t,o.argument=n,o}return S(t,e),t.prototype.accept=function(e){return e.visitCallExpr(this)},t}(e);e.Call=o;var s=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.value=t,i}return S(t,e),t.prototype.accept=function(e){return e.visitLiteralExpr(this)},t}(e);e.Literal=s;var u=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.expression=t,i}return S(t,e),t.prototype.accept=function(e){return e.visitPercentageExpr(this)},t}(e);e.Percentage=u;var a=function(e){function t(t,n,r,i){var o=e.call(this,r,i)||this;return o.unit=n,o.expression=t,o}return S(t,e),t.prototype.accept=function(e){return e.visitUnitExpr(this)},t}(e);e.UnitExpr=a;var c=function(e){function t(t,n,r,i){var o=e.call(this,r,i)||this;return o.unit=n,o.expression=t,o}return S(t,e),t.prototype.accept=function(e){return e.visitUnitConvertionExpr(this)},t}(e);e.UnitConvertionExpr=c;var h=function(e){function t(t,n,r,i){var o=e.call(this,r,i)||this;return o.operator=t,o.right=n,o}return S(t,e),t.prototype.accept=function(e){return e.visitUnaryExpr(this)},t}(e);e.Unary=h}(C=M.Expr||(M.Expr={})),M.Expr=C;var L={};Object.defineProperty(L,"__esModule",{value:!0});var R=function(){function e(e,t,n){this.source=e,this.lexer=new A.Lexer(this.source,t,n),this.ntoken=0,this.tokens=[]}return e.prototype.parse=function(){return this.Stmt()},e.prototype.Stmt=function(){var e=this.assignment();if(this.match(g.TokenType.NEWLINE))return e;if(this.peek().type===g.TokenType.EOL)throw new Error("Expecting new Line");throw new Error("Unexpected token "+this.peek().lexeme)},e.prototype.assignment=function(){var e=this.expression();if(this.match(g.TokenType.EQUAL)){var t=this.expression();if(e instanceof M.Expr.Variable){var n=e.name;return new M.Expr.Assign(n,t,e.start,t.end)}}return e},e.prototype.expression=function(){return this.percentage()},e.prototype.percentage=function(){for(var e=this.addition();this.match(g.TokenType.OF);){var t=this.previous(),n=this.addition();e=new M.Expr.Binary(e,t,n,e.start,n.end)}return e},e.prototype.addition=function(){for(var e=this.multiply();this.match(g.TokenType.PLUS,g.TokenType.MINUS);){var t=this.previous(),n=this.multiply();e=new M.Expr.Binary(e,t,n,e.start,n.end)}return e},e.prototype.multiply=function(){for(var e=this.unary();this.match(g.TokenType.TIMES,g.TokenType.SLASH,g.TokenType.MOD,g.TokenType.OF);){var t=this.previous(),n=this.unary();e=new M.Expr.Binary(e,t,n,e.start,n.end)}return e},e.prototype.unary=function(){if(this.match(g.TokenType.PLUS,g.TokenType.MINUS)){var e=this.previous(),t=this.unary();return new M.Expr.Unary(e,t,e.start,t.end)}return this.exponent()},e.prototype.exponent=function(){for(var e=this.unitConvert();this.match(g.TokenType.CAP);){var t=this.previous(),n=this.unary();e=new M.Expr.Binary(e,t,n,e.start,n.end)}return e},e.prototype.unitConvert=function(){var e=this.suffix();if(this.match(g.TokenType.IN)){this.consume(g.TokenType.UNIT,"Expecting unit after in");var t,n=this.previous();if(null!=(t=this.lexer.ttypes.get(n.lexeme)[0]))return new M.Expr.UnitConvertionExpr(e,t,e.start,n.end)}return e},e.prototype.suffix=function(){var e=this.call();if(this.match(g.TokenType.PERCENTAGE)){var t=this.previous();return new M.Expr.Percentage(e,e.start,t.end)}if(this.match(g.TokenType.UNIT)){var n,r=this.previous();if(null!=(n=this.lexer.ttypes.get(r.lexeme)[0]))return new M.Expr.UnitExpr(e,n,e.start,r.end)}return e},e.prototype.call=function(){var e=this.term();if(this.match(g.TokenType.OPEN_PARAN)){if(e instanceof M.Expr.Variable){var t=Array();if(this.peek().type!==g.TokenType.CLOSE_PARAN)do{if(t.length>=255)throw new Error("Cannot have more than 255 arguments");t.push(this.expression())}while(this.match(g.TokenType.COMMA));return this.consume(g.TokenType.CLOSE_PARAN,"Expect ')' after the arguments"),new M.Expr.Call(e.name,t,e.start,this.previous().end)}throw new Error("Not callable")}return e},e.prototype.term=function(){if(this.match(g.TokenType.Number))return new M.Expr.Literal(this.previous().Literal,this.previous().start,this.previous().end);if(this.match(g.TokenType.OPEN_PARAN)){var e=this.previous(),t=this.expression();return this.consume(g.TokenType.CLOSE_PARAN,"Expect ')' after expression"),new M.Expr.Grouping(t,e.start,this.previous().end)}if(this.match(g.TokenType.NAME))return new M.Expr.Variable(this.previous().lexeme,this.previous().start,this.previous().end);throw new Error("Expect expression but found "+this.peek().lexeme)},e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n];if(this.check(i))return this.incr(),!0}return!1},e.prototype.consume=function(e,t){if(!this.check(e))throw new Error(t);this.incr()},e.prototype.check=function(e){return!this.isAtEnd()&&this.peek().type===e},e.prototype.isAtEnd=function(){return this.nextToken().type===g.TokenType.EOL},e.prototype.nextToken=function(){return this.ntoken<this.tokens.length?this.tokens[this.ntoken]:this.getToken()},e.prototype.getToken=function(){var e=this.lexer.Next();return e.type!==g.TokenType.EOL&&this.tokens.push(e),e},e.prototype.previous=function(){return this.tokens[this.ntoken-1]},e.prototype.peek=function(){return this.nextToken()},e.prototype.incr=function(){this.ntoken++},e}();L.Parser=R;var U={},_=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r};Object.defineProperty(U,"__esModule",{value:!0});var F=function(){function e(e,t,n,r,i){this.parser=new L.Parser(e,t,n),this.environment=r,this.funcations=i,this.ast=this.parser.parse()}return e.prototype.visitCallExpr=function(e){var t,n,r=e.name;if(n=(t=this.funcations.get(r))[0],t[1]&&null!=n){if(-1!==n.arbity&&n.arbity!==e.argument.length)throw new Error("Expected "+n.arbity+" but got "+e.argument.length);for(var i=Array(),o=0,s=e.argument;o<s.length;o++){var u=s[o];i.push(this.evaluate(u))}return n.call.apply(n,_([this.environment],i))}throw Error(r+" is not callable")},e.prototype.visitAssignExpr=function(e){var t=this.evaluate(e.value);return this.environment.set(e.name,t),t},e.prototype.visitVariableExpr=function(e){return this.environment.get(e.name)},e.prototype.evaluateExpression=function(){return this.evaluate(this.ast)},e.prototype.visitUnitConvertionExpr=function(e){var t=this.evaluate(e.expression);if(t instanceof n.Type.Numberic)return n.Type.Units.convertToUnit(t,e.unit);throw new Error("Expecting numeric value before in")},e.prototype.visitUnitExpr=function(e){var t=this.evaluate(e.expression);if(t instanceof n.Type.Numberic)return n.Type.Units.New(t.number,e.unit);throw new Error("Expecting numeric value before unit")},e.prototype.visitBinaryExpr=function(e){var t=this.evaluate(e.left),r=this.evaluate(e.right);switch(e.operator.type){case g.TokenType.PLUS:return t.Add(r);case g.TokenType.MINUS:return t.Sub(r);case g.TokenType.TIMES:return t.times(r);case g.TokenType.SLASH:return t.divide(r);case g.TokenType.MOD:return r.isZero()?new n.Type.BNumber("Infinity"):t.modulo(r);case g.TokenType.CAP:return t.isNegative()&&!r.isInteger()?t.negated().power(r).negated():t.power(r);case g.TokenType.OF:var i=t=new n.Type.Percentage(t.number);return r.number=i.percentageValue(r.number),r;default:return n.Type.BNumber.ZERO}},e.prototype.visitGroupingExpr=function(e){return this.evaluate(e.expression)},e.prototype.visitLiteralExpr=function(e){return e.value},e.prototype.visitUnaryExpr=function(e){var t=this.evaluate(e.right);return e.operator.type===g.TokenType.MINUS?t.negated():t},e.prototype.visitPercentageExpr=function(e){var t=this.evaluate(e.expression);if(t instanceof n.Type.Numberic)return n.Type.Percentage.New(t.number);throw new Error("Expecting numeric value in percentage")},e.prototype.setValues=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.environment.set(t,n)}},e.prototype.evaluate=function(e){return e.accept(this)},e}();U.Interpreter=F;var I={},D=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r};Object.defineProperty(I,"__esModule",{value:!0});var Y=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.type=e,this.phrases=t}return e.prototype.add=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(this.check(o))throw new Error(o+" already exists")}(e=this.phrases).push.apply(e,t)},e.prototype.check=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=this.phrases;n<r.length;n++)for(var i=r[n],o=0,s=e;o<s.length;o++)if(s[o]===i)return!0;return!1},e}(),B=function(){function e(){this.phrases=[]}return e.prototype.add=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.phrases).push.apply(e,t)},e.prototype.getPhrases=function(e){for(var t=0,n=this.phrases;t<n.length;t++){var r=n[t];if(r.type===e)return[r.phrases,!0]}return[[],!1]},e.prototype.search=function(e){e=e.toUpperCase();for(var t=0,n=this.phrases;t<n.length;t++){var r=n[t];if(r.phrases.find(function(t){return t===e}))return[r.type,!0]}return[0,!1]},e.prototype.addPhrases=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(n=n.map(function(e){return e.toUpperCase()}),this.checkPhrase.apply(this,n))throw new Error("phrases already exits");for(var i=0,o=this.phrases;i<o.length;i++){var s=o[i];s.type===e&&(t=s.phrases).push.apply(t,n)}this.add(new(Y.bind.apply(Y,D([void 0,e],n))))},e.prototype.checkPhrase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=this.phrases;n<r.length;n++){var i=r[n];if(i.check.apply(i,e))return!0}return!1},e}();I.Phrases=B;var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.Environment=v.Environment,G.FcalFunctions=u.FcalFunctions,G.Type=n.Type,G.TType=f.TType;var V=function(){function e(){this.phrases=e.getdefaultphrases(),this.ttypes=m.getdefaultTTypes(),this.environment=new v.Environment,this.setDefaultValues(),this.functions=new u.FcalFunctions,this.setDefaultFunctions()}return e.getdefaultphrases=function(){var e=new I.Phrases;return e.addPhrases(g.TokenType.PLUS,"PLUS","AND","WITH","ADD"),e.addPhrases(g.TokenType.MINUS,"MINUS","SUBTRACT","WITHOUT"),e.addPhrases(g.TokenType.TIMES,"TIMES","x","MULTIPLIEDBY","mul"),e.addPhrases(g.TokenType.SLASH,"DIVIDE","DIVIDEBY"),e.addPhrases(g.TokenType.CAP,"POW"),e.addPhrases(g.TokenType.MOD,"mod"),e.addPhrases(g.TokenType.OF,"of","as"),e.addPhrases(g.TokenType.IN,"in"),e},e.prototype.evaluate=function(e){return e=H(e),new U.Interpreter(e,this.phrases,this.ttypes,this.environment,this.functions).evaluateExpression()},e.prototype.expression=function(e){var t=new v.Environment;return t.values=Object.assign({},this.environment.values),e=H(e),new q(new U.Interpreter(e,this.phrases,this.ttypes,t,this.functions))},e.prototype.expressionWithContext=function(e){return e=H(e),new q(new U.Interpreter(e,this.phrases,this.ttypes,this.environment,this.functions))},e.prototype.setValues=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.environment.set(t,n)}},e.prototype.setFunctions=function(e){for(var t=0,n=e.functions;t<n.length;t++){var r=n[t];this.functions.add(r)}},e.prototype.setDefaultValues=function(){this.setValues({E:n.Type.BNumber.New("2.718281828459045235360287"),PI:n.Type.BNumber.New("3.141592653589793238462645"),PI2:n.Type.BNumber.New("6.28318530718")})},e.prototype.setDefaultFunctions=function(){this.setFunctions(p.getDefaultFunction())},e}();function H(e){return e.endsWith("\n")?e:e+"\n"}G.Fcal=V;var q=function(){function e(e){this.interpreter=e}return e.prototype.evaluate=function(){return this.interpreter.evaluateExpression()},e.prototype.setValues=function(e){this.interpreter.setValues(e)},e}();G.Expression=q}();